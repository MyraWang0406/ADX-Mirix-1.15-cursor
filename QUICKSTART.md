# 快速启动指南

## 步骤 1: 生成白盒日志

首先运行 Python 后端模拟，生成 `whitebox.log` 文件：

```bash
python main.py
```

这将生成包含所有决策点详细追踪信息的日志文件。

## 步骤 2: 启动前端看板

在另一个终端窗口中，启动 Next.js 开发服务器：

```bash
npm run dev
```

## 步骤 3: 访问看板

打开浏览器访问：http://localhost:3000

## 功能说明

### 实时交易流（左侧边栏）
- 显示最新的交易请求摘要
- 绿色 ✓ 表示通过，红色 ✗ 表示拒绝
- 点击任意请求可展开查看完整的 WhiteboxTrace JSON
- **点击失败的请求会自动打开右侧的白盒排查区**

### 损耗漏斗（顶部）
- 实时展示 Request -> Valid -> Bid -> Win 的转化漏斗
- 显示每个阶段的转化率
- 自动计算中标率

### 白盒排查区（底部）
- 点击失败请求后，显示完整的决策链路
- **高亮显示拒绝原因**（红色背景）
- **自然语言翻译 reason_code**，例如：
  - "出价 ¥0.05 低于底价 ¥0.10，相差 ¥0.05"
  - "设备 device_001 或应用 app_001 在黑名单中，请求被拒绝"
- 显示每个决策点的内部变量和推理过程

## 实时更新

看板每 2 秒自动刷新一次，读取 `whitebox.log` 的最后 100 行。

## 响应式设计

- 桌面端：三栏布局（实时流 | 漏斗+排查区）
- 移动端：单栏堆叠布局，自动适配

## 故障排查

### API 无法读取日志
确保 `whitebox.log` 文件存在于项目根目录。

### 页面显示空白
检查浏览器控制台是否有错误，确保 Next.js 开发服务器正常运行。

### 数据不更新
检查 `whitebox.log` 文件是否有新内容写入，可以手动点击"刷新"按钮。



